
@{
    ViewBag.Title = "CreateForkliftModel";
}

<link href="~/Content/theme/css/select2.min.css" rel="stylesheet" />
<link href="~/Content/theme/css/select2-bootstrap4.min.css" rel="stylesheet" />



<style>
    #imageUpload {
        display: none;
    }

    #profileImage {
        cursor: pointer;
    }

    #profile-container {
        width: 150px;
        height: 150px;
        overflow: hidden;
        -webkit-border-radius: 0%;
        -moz-border-radius: 0%;
        -ms-border-radius: 0%;
        -o-border-radius: 0%;
        border-radius: 0%;
        border: 2px solid #cacaca;
    }

        #profile-container img {
            width: 150px;
            height: 150px;
        }

    label {
        font-size: 14px;
        color: #003399;
    }
</style>


<!-- Main content -->
<div class="container-fluid px-4">
    <div class="row">
        <div class="col-md-12">



            <form id="myfrm" enctype="multipart/form-data">
                <div class="row mb-3 pb-3">
                    <div class="col-lg-2">
                        <div class="image_wrap">

                            <div id="profile-container">
                                <image id="setImage" src="~/Content/theme/img/profile.png" class="img-fluid" alt="" />
                            </div>

                            <input id="imageUpload" type="file"
                                   placeholder="Photo" name="imageUpload" accept="image/*">

                            <div class="profile_btn_group">

                                <span id="profileImage" class="btnLink profile_upload_btn">
                                    <i class="fas fa-camera"></i>
                                </span>

                            </div>


                        </div>


                    </div>
                </div>

                <div class="">
                    <div class="row">
                        <div class="col-md-4">

                            <h3>Transportation Fees</h3>
                            <div class="form-group">
                                <label>Pick Up</label>
                                <input onkeypress="return isNumberKey(event)" required  id="TransportationPickUp" name="TransportationPickUp" type="text" class="form-control " placeholder="Pick Up">
                            </div>
                            <div class="form-group">
                                <label>Drop off/ pick Up</label>
                                <input  onkeypress="return isNumberKey(event)" required id="TransportationDropOffPickUp" name="TransportationDropOffPickUp" type="text" class="form-control "  placeholder="Drop off/ pick Up">
                            </div>
                            <div class="form-group">
                                <label>Drop off only</label>
                                <input onkeypress="return isNumberKey(event)" required  id="TransportationDropOffOnly" name="TransportationDropOffOnly" type="text" class="form-control "  placeholder="Drop off only">
                            </div>
                            <div class="form-group">
                                <label>Pick Up Only</label>
                                <input onkeypress="return isNumberKey(event)" required  id="TransportationPickUpOnly" name="TransportationPickUpOnly" type="text" class="form-control " placeholder="Pick Up Only">
                            </div>
                            <h3 class="pt-2 pb-2">Insurance</h3>
                            <div class="form-group">
                                <label>Loss Damage Waiver</label>
                                <input onkeypress="return isNumberKey(event)" id="InsuranceLossDamageWaiver" name="InsuranceLossDamageWaiver" type="text" class="form-control " placeholder="Loss Damage Waiver">
                            </div>
                            <div class="form-group">
                                <label>Purchase Price</label>
                                <input onkeypress="return isNumberKey(event)" required  id="InsurancePurchasePrice" name="InsurancePurchasePrice" type="text" class="form-control" placeholder="Purchase Price">
                            </div>
                            <div class="form-group">
                                <label>Quantity</label>
                                <input onkeypress="return isNumberKey(event)" required   id="Quantity" name="Quantity" type="text" class="form-control "  placeholder="Purchase Price">
                            </div>
                        </div>


                        <div class="col-md-8 pl-4">

                            @*this*@
                            <div class="row">
                                <div class="form-group d-flex">
                                    <label class="pt-2 pr-3">Make</label>
                                    <input required id="Make" name="Make" type="text" class="form-control" placeholder="Make">
                                </div>
                                <div class="form-group d-flex">
                                    <label class="pt-2 pr-3 pl-3">Capacity</label>
                                    <input onkeypress="return isNumberKey(event)" required id="Capacity" name="Capacity" type="text" class="form-control" placeholder="Capacity">
                                </div>
                            </div>
                            <div class="row">
                                <div class="form-group d-flex">
                                    <label class="pt-2 pr-3">Model</label>
                                    <input required id="ForkliftModel" name="ForkliftModel" type="text" class="form-control" placeholder="Forklift Model">
                                </div>
                                <div class="form-group d-flex">
                                    <label class="pt-2 pr-3 pl-3" style="width:135px;">Max Meter</label>
                                    <input onkeypress="return isNumberKey(event)" required id="MaxMeter" name="MaxMeter" type="text" class="form-control" placeholder="Max Meter">
                                </div>
                            </div>

                            <div class="row">
                                <div class="form-group d-flex col-md-10">
                                    <label class="pt-2 pr-3">Title</label>
                                    <input id="Title" name="Title" type="text" class="form-control" placeholder="Title">
                                </div>


                            </div>
                            @*this*@

                            <div class="row">
                                <div class="form-group d-flex col-md-10">
                                    <label class="pt-2 pr-3">Forklift</label>

                                    <select id="ForkliftId" name="ForkliftId" class="select2bs4" data-placeholder="Select related forklift" style="width: 100%;" data-select2-id="23" tabindex="-1" aria-hidden="true">
                                        @{
                                            IEnumerable<Core.Model.Forklift> lstForkliftsList = ViewBag.ddlForkliftsList;
                                            if (lstForkliftsList != null)
                                            {
                                                foreach (var item in lstForkliftsList)
                                                {
                                                    <option value="@item.Id">@item.Name</option>
                                                }
                                            }

                                        }
                                    </select>

                                </div>
                            </div>


                            <div class="row">
                                <div class="form-group d-flex col-md-10">
                                    <label class="pt-2 pr-3 pl-0">Description</label>
                                    <textarea id="Description" name="Description" class="form-control w-100" rows="3"></textarea>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-8">
                                    <h3 class="pt-2">Pricing</h3>
                                    <div class="row">
                                        <div class="col-md-3 pt-4"><label>Standard</label></div>
                                        <div class="col-md-9 d-flex">
                                            <div class="form-group  mr-2">
                                                <label>Daily</label>
                                                <input onkeypress="return isNumberKey(event)" required type="text" id="PricingStandardDaily" name="PricingStandardDaily" class="form-control" placeholder="Daily">
                                            </div>
                                            <div class="form-group mr-2">
                                                <label>Weekly</label>
                                                <input onkeypress="return isNumberKey(event)" required type="text" id="PricingStandardgWeekly" name="PricingStandardgWeekly" class="form-control" placeholder="Weekly">
                                            </div>
                                            <div class="form-group mr-2">
                                                <label>Monthly</label>
                                                <input onkeypress="return isNumberKey(event)" required type="text" id="PricingStandardMonthly" name="PricingStandardMonthly" class="form-control" placeholder="Monthly">
                                            </div>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-md-3 pt-2"><label>National Account</label></div>
                                        <div class="col-md-9 d-flex">
                                            <div class="form-group  mr-2">
                                                <input onkeypress="return isNumberKey(event)" required type="text" id="NationalAccountDaily" name="NationalAccountDaily" class="form-control " placeholder="Daily">
                                            </div>
                                            <div class="form-group mr-2">
                                                <input onkeypress="return isNumberKey(event)" required type="text" id="NationalAccountWeekly" name="NationalAccountWeekly" class="form-control " placeholder="Weekly">
                                            </div>
                                            <div class="form-group mr-2">
                                                <input onkeypress="return isNumberKey(event)" required type="text" id="NationalAccountMonthly" name="NationalAccountMonthly" class="form-control " placeholder="Monthly">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-4 mt-2">
                                    <div class="row border">
                                        <div class="col-md-6">
                                            <h5 style="font-size:16px;font-weight:bold;">Charge</h5>
                                            <input readonly id="lblEnvironmental" name="lblEnvironmental" value="Environmental" style="background-color:transparent;border:0px solid"/>
                                            <input readonly id="lblMiscCharges" name="lblMiscCharges" value="Misc Charges" style="background-color:transparent;border:0px solid"/>
                                        </div>
                                        <div class="col-md-6">
                                            <h5 style="font-size:16px;font-weight:bold;">Amount</h5>
                                            <p>  <input onkeypress="return isNumberKey(event)" required type="text" id="Environmental" class="form-control" name="Environmental" placeholder="$4.00"></p>
                                            <p>  <input onkeypress="return isNumberKey(event)" required type="text" id="MiscCharges" class="form-control" name="MiscCharges" placeholder="$2.00"></p>
                                        </div>
                                    </div>

                                    @*<div class="mt-3">
                    <a id="btnAddCharge" class="btn btn-primary mr-3" href="#" role="button">Add Charge</a>
                    <a class="btn btn-primary" href="#" role="button">Delete</a>
                </div>*@
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
                <!-- /.row -->
                <!-- row -->
                <div class="profile-form mb-5">
                    @*<div class="row mt-3">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Name</label>
                                <input   id="txtInsuranceName" type="text" class="form-control" name="" placeholder="Name">
                            </div>
                        </div>
                    </div>*@

                    @*<div class="row">
                        <div class="col-md-6">

                            <div class="form-group">
                                <label>Description</label>
                                <textarea   class="form-control" id="txtInsuranceDescription" name="Text1" cols="40" rows="6"></textarea>

                            </div>

                        </div>
                    </div>*@



                    <div class="row">

                        <div class="col-md-6">



                            <div class="separator"></div>
                            <div class="form-group">
                                <label id="ErrorMessage" style="color: red;"></label>
                            </div>

                        </div>


                    </div>

                    <div class="buttons-group text-center mt-4">
                        <a href="~/Forklift/ForkliftModelManagement" class="btn mr-2">Cancel</a>
                        @*<button id="btnSave" type="submit" onclick="javascript:dataAccess.loginService.addPhysician()" class="btn flat-btn ml-2">Save</button>*@
                        <button id="btnSave" type="submit" class="btn flat-btn ml-2">Add</button>
                    </div>
                </div>
            </form>

            <div class="loading">
                @*<img id="loading-image" src="~/Content/theme/img/preloader.gif" alt="Loading..." />*@
            </div>

        </div>
    </div>
    <!-- /.row -->
</div><!-- /.container-fluid -->
<!-- /.content -->

<script src="~/Content/theme/js/select2.full.min.js"></script>

<script type="text/javascript">

    function isNumberKey(evt) {
        var charCode = (evt.which) ? evt.which : evt.keyCode;
        if (charCode != 46 && charCode > 31
            && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }

    //Initialize Select2 Elements
    $('.select2bs4').select2({
        theme: 'bootstrap4'
    });

    $("#profileImage").click(function (e) {

        $("#imageUpload").click();
    });

    function fasterPreview(uploader) {
        //
        if (uploader.files && uploader.files[0]) {
            //$('#setImage').attr('src',
            //    window.URL.createObjectURL(uploader.files[0]));

            var File = uploader.files;
            var reader = new FileReader();
            reader.readAsDataURL(File[0]);

            reader.onload = function (x) {
                var image = new Image;
                image.src = x.target.result;

                image.onload = function () {
                    //alert(1);
                    //
                    var width = this.width;
                    var height = this.height;
                    var type = File[0].type;


                    if ((width <= "100" && height <= "100") && (type == "image/png" || type == "image/jpg" || type == "image/jpeg")) {
                        $('#setImage').attr('src', x.target.result);
                    }
                    else {
                        swal("Warning! invalid image!", "size must be 100x100 or less then 100x100 and type:png/jpg/jpeg");
                        //alert(width + " " + height + " " + type);
                    }

                }

            }
        }
    }

    $("#imageUpload").change(function () {
        //
        fasterPreview(this);


    });

    $(document).on('submit', "form", function (e) {
          debugger;

          e.preventDefault();
          var file = $("#imageUpload").get(0).files;
          if (file.length == 0) {
              swal("Required", "Image is required", "warning");
              return false;
          }
          
          dataAccess.forkliftService.addforkliftModel(this);

        //debugger
        //var formData = new FormData(this);
        //$.ajax({
        //    url: '/Forklift/CreateForkliftModel',
        //    type: "POST",
        //    dataType: "JSON",
        //    data: formData,
        //    cache: false,
        //    contentType: false,
        //    processData: false,
        //    success: function (resp) {
        //        debugger
        //        if (resp.isSuccess) {
        //            toastr["info"](resp.msg)
        //            window.location.reload()
        //        } else {
        //            toastr["error"](resp.msg)
        //        }
        //    }
        //});
    });

    //$('#btnSave').click(function () {
    //    debugger;
    //  //  dataAccess.forkliftService.addforkliftModel();

    //});

</script>