@model IEnumerable<Core.Model.User>

@{
    ViewBag.Title = "UserManagement";
}


<!-- Content Wrapper. Contains page content -->
<!-- Main content -->

<style>
    .switch {
        position: relative;
        display: inline-block;
        width: 60px;
        height: 34px;
    }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        -webkit-transition: .4s;
        transition: .4s;
    }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            -webkit-transition: .4s;
            transition: .4s;
        }

    input:checked + .slider {
        background-color: #2196F3;
        /*background-color: 003399;*/
    }

    input:focus + .slider {
        box-shadow: 0 0 1px #2196F3;
    }

    input:checked + .slider:before {
        -webkit-transform: translateX(26px);
        -ms-transform: translateX(26px);
        transform: translateX(26px);
    }

    /* Rounded sliders */
    .slider.round {
        border-radius: 34px;
    }

        .slider.round:before {
            border-radius: 50%;
        }
</style>



<div class="content setTop-margin">
    <div class="container-fluid px-4">
        <div class="content-header">
            <div class="input-group searchGroup col-md-4">
            </div>
            @if (User.IsInRole("Admin"))
            {
                <a href="~/User/CreateUser" class="btn btn-success"><i class="fas fa-plus-circle"></i> Add New User</a>
            }

        </div>

        <div class="main_table">
            <div class="row mt-4">
                <div class="col-12">
                    <div class="card p-3">
                        <!-- /.card-header -->
                        <div class="card-body physicians-table table-responsive p-0">
                            <table id="table" class="table table-hover text-center">
                                <thead>
                                    <tr class="bg-grey">
                                        @*<th>
            <div class="list-checked">
                <label class="check-container">
                    <input id="checkAll" type="checkbox">
                    <span class="checkmark"></span>
                </label>
            </div>
        </th>*@
                                        <th>User profile</th>
                                        <th>Full name</th>
                                        @*<th>Last Name</th>*@
                                        <th>DOB</th>
                                        <th>Job title</th>
                                        <th>Email</th>
                                        <th>State</th>
                                        @*<th>City</th>*@
                                        <th>Phone no</th>
                                        <th>Status</th>
                                        <th>Action</th>
                                    </tr>
                                </thead>
                                <tbody id="myTable">
                                    @if (Model != null)
                                    {
                                        foreach (var item in Model)
                                        {
                                    <tr>

                                        <td>
                                            @if (!String.IsNullOrEmpty(item.Image))
                                            {
                                                <div class="user-block user-image">
                                                    @*<img class="img-circle img-bordered-sm" src="@Url.Content(TripleDESCryptography.Decrypt(item.ProfileImage))" height="100" />*@
                                                    <img class="img-circle img-bordered-sm" src="@Url.Content(item.Image)" height="100" />
                                                </div>
                                            }
                                            else
                                            {
                                                <div class="user-block user-image">
                                                    <img class="img-circle img-bordered-sm" src="~/Content/theme/img/profileeee.jpg" alt="User Image" />
                                                </div>
                                            }

                                        </td>
                                        <td>@item.FirstName @item.LastName </td>
                                        @*<td>@item.LastName</td>*@
                                        <td>@item.DOB</td>
                                        <td>@item.JobTitle</td>
                                        <td>@item.EmailAddress</td>
                                        <td>@item.State.StateName</td>
                                        @*<td>@item.City</td>*@
                                        <th>@item.MobileNumber</th>
                                        @if (item.IsActive == true)
                                        {
                                            <td>Active</td>
                                        }
                                        else
                                        {
                                            <td>In active</td>
                                        }

                                        <td><a href="~/User/ViewUser?userId=@item.Id" class="view-btn"><i class="fas fa-eye"></i></a></td>

                                        @if (User.IsInRole("Admin"))
                                        {
                                            <td><a href="~/User/EditUser?userId=@item.Id" class="view-btn"><i class="fas fa-edit"></i></a></td>
                                            <td><a href="javascript:dataAccess.userService.DeleteUser(@item.Id)" class="view-btn"><i class="fas fa-trash-alt"></i></a></td>
                                        }

                                    </tr>
                                        }
                                    }



                                </tbody>
                            </table>
                        </div>
                        <!-- /.card-body -->
                    </div>
                    <!-- /.card -->
                </div>
            </div>
        </div>
        <!-- row -->
    </div><!-- /.container-fluid -->
    <!-- /.content -->
</div>
<!-- /.content-wrapper -->
<script>




    //$('.chkitem').click(function () {

    //    debugger;
    //    //alert(2);
    //    const previousCheckboxValue = this; //
    //    //var UserId = $(this).attr("data-id");

    //    if ($(this).is(':checked')) {

    //      //  var remember = $('#cbxVerified').prop('checked') ? true : false;
    //        var userStatus = 1;
    //        var UserId = $(this).attr("data-id");
    //    //    alert("is checked");

    //        dataAccess.loginService.markVerified(UserId, userStatus, previousCheckboxValue);

    //    } else {

    //     // var remember = $('#cbxVerified').prop('checked') ? true : false;
    //        var userStatus = 0;
    //        var UserId = $(this).attr("data-id");
    //     //  alert("not checked");

    //        dataAccess.loginService.markVerified(UserId, userStatus, previousCheckboxValue);
    //    }


    //});





    $(document).ready(function () {


        $('#table').DataTable({
            //"scrollY": "68vh",
            //"scrollCollapse": false,
            "searching": true,
            //"paging": true,
            autoWidth: true,
            responsive: true
        });
    });

</script>


